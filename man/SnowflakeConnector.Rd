% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/r6_snowflake_connection.R
\name{SnowflakeConnector}
\alias{SnowflakeConnector}
\title{SnowflakeConnector: An R6 Snowflake ODBC helper}
\description{
\code{SnowflakeConnector} encapsulates a Snowflake ODBC connection with modular helpers for:
\itemize{
\item Safe SQL interpolation via \code{glue::glue_sql()} bound to the connection
\item Query history tracking (\code{run_query_history}) with structured metadata
\item \code{data.table::setattr} lineage under \code{"snowflake-sources"}
\item Simple transactions (\verb{$transaction_begin/commit/rollback})
\item Simple writes (\verb{$write_data})
}

Credentials are expected to be provided by your DSN and/or the constructor
arguments (\code{uid}, \code{pwd}, etc.). This package does \strong{not} read YAML files.
}
\section{Public fields}{

\describe{
\item{connection}{Active binding returning the live DBI ODBC connection.}
\item{run_query_history}{Active binding returning a \code{data.table} with query execution metadata.}
}
}

\examples{
\dontrun{
con <- SnowflakeConnector$new(
  dsn = "snowflake-bi",
  role = "ANALYST",
  warehouse = "BI_WH",
  database = "PROD_DB",
  schema = "PRESENTATION"
)
con$run_query("show tables;")
con$run_query("select 1 as x")
con$run_query_history
con$close()
}
}
\seealso{
\code{\link{snowflake_get_query_dsn}}, \code{\link{sqlQuerySources}}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{connection}}{The live DBI ODBC connection object.}

\item{\code{run_query_history}}{\code{data.table} with columns \code{query} and \code{result}.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-SnowflakeConnector-new}{\code{SnowflakeConnector$new()}}
\item \href{#method-SnowflakeConnector-close}{\code{SnowflakeConnector$close()}}
\item \href{#method-SnowflakeConnector-run_query}{\code{SnowflakeConnector$run_query()}}
\item \href{#method-SnowflakeConnector-write_data}{\code{SnowflakeConnector$write_data()}}
\item \href{#method-SnowflakeConnector-transaction_begin}{\code{SnowflakeConnector$transaction_begin()}}
\item \href{#method-SnowflakeConnector-transaction_commit}{\code{SnowflakeConnector$transaction_commit()}}
\item \href{#method-SnowflakeConnector-transaction_rollback}{\code{SnowflakeConnector$transaction_rollback()}}
\item \href{#method-SnowflakeConnector-clone}{\code{SnowflakeConnector$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-new"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-new}{}}}
\subsection{Method \code{new()}}{
Construct a new connector (opens a connection).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$new(
  dsn,
  uid = NULL,
  pwd = NULL,
  database = NULL,
  schema = NULL,
  role = NULL,
  warehouse = NULL,
  timezone = Sys.timezone(),
  timezone_out = Sys.timezone(),
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{dsn}}{ODBC DSN name.}

\item{\code{uid}}{Optional user id (overrides DSN).}

\item{\code{pwd}}{Optional password (overrides DSN).}

\item{\code{database}}{Optional default database.}

\item{\code{schema}}{Optional default schema.}

\item{\code{role}}{Optional default role.}

\item{\code{warehouse}}{Optional default warehouse.}

\item{\code{timezone}}{Server timezone for the connection. Defaults to \code{Sys.timezone()}.}

\item{\code{timezone_out}}{Timezone for datetimes returned to R. Defaults to \code{Sys.timezone()}.}

\item{\code{...}}{Additional arguments passed to \code{DBI::dbConnect()}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-close"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-close}{}}}
\subsection{Method \code{close()}}{
Close the connection.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$close()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-run_query"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-run_query}{}}}
\subsection{Method \code{run_query()}}{
Execute a SELECT and return a \code{data.table} (with lineage attribute).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$run_query(
  SQL,
  literal = FALSE,
  glue_envir = parent.frame(1L)
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{SQL}}{SQL string (glue placeholders allowed).}

\item{\code{literal}}{If \code{TRUE}, skip parameter quoting (passed to \code{glue_sql()}).}

\item{\code{glue_envir}}{Environment where glue placeholders are evaluated.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-write_data"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-write_data}{}}}
\subsection{Method \code{write_data()}}{
Write a data.frame / data.table into Snowflake.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$write_data(table, value, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{table}}{Target table name (\code{character}) or \code{DBI::Id}.}

\item{\code{value}}{Data to write (\code{data.frame} / \code{data.table}).}

\item{\code{...}}{Passed to \code{DBI::dbWriteTable()} (e.g., \code{append = TRUE}, \code{overwrite = TRUE}).}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-transaction_begin"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-transaction_begin}{}}}
\subsection{Method \code{transaction_begin()}}{
Begin a transaction.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$transaction_begin()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-transaction_commit"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-transaction_commit}{}}}
\subsection{Method \code{transaction_commit()}}{
Commit a transaction.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$transaction_commit()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-transaction_rollback"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-transaction_rollback}{}}}
\subsection{Method \code{transaction_rollback()}}{
Roll back a transaction.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$transaction_rollback()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SnowflakeConnector-clone"></a>}}
\if{latex}{\out{\hypertarget{method-SnowflakeConnector-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SnowflakeConnector$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
